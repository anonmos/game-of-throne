<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style type="text/css">
    body {
      text-align:center;
      height: 100px;
      position: absolute;
      top:0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
    }
  </style>
</head>
<body onload="getTolietStatus()">
  <div id="main_container">
    <h1 id="status">
    Updating...
    </h1>
    <div id="updated">
    </div>
    <div>
    <font color="grey">Refreshes every 5 seconds </font>
    </div>
  </div>


  <script type="text/javascript">

    function getTolietStatus() {
      setTimeout(getTolietStatus, 5000);
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var status = JSON.parse(this.responseText);
          if (status.state == "YES") {
            document.getElementById("status").style.color = 'Green'
          }
          else {
            document.getElementById("status").style.color = 'Red' 
          }
          document.getElementById("status").innerHTML =
          status.state
          var local_datetime = new Date(status.UpdatedDate)
          document.getElementById("updated").innerHTML =
          "Last Updated at: " + local_datetime.toLocaleString()
        }
      };
      xhttp.open("GET", "https://d1hwvdyij5jneh.cloudfront.net/state", true);
      xhttp.send();
    }

  </script>

</body>
</html>
